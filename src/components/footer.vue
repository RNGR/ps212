<template>
  <footer>
    <div class="container">
      <div class="column">
        <router-link to="/">
          <svg
            id="logo"
            xmlns="http://www.w3.org/2000/svg"
            width="110"
            height="26"
            viewBox="0 0 110 26"
          >
            <path
              fill="#E53935"
              fill-rule="evenodd"
              d="M13.7220734,7.33807239 C13.7805233,7.36617721 13.8365292,7.39550397 13.8900913,7.42625634 C15.444817,8.33314572 16.0496815,10.2634169 16.0496815,14.3125466 C16.0496815,17.3657884 15.9087501,20.2102807 14.2063723,21.4646107 C14.0528141,21.584158 13.8823523,21.6880236 13.6870442,21.7796697 C22.014419,21.2310149 25.0031012,17.4254602 25.0031012,14.2308797 C25.0031012,9.95426395 22.4038132,7.98896358 16.0313522,7.44764044 C15.366205,7.39448568 14.5491288,7.35619796 13.7220734,7.33807239 Z M0,32.3979942 C1.61582312,31.7462883 2.21681808,30.3777061 2.21681808,27.655816 L2.21681808,12.0682347 C2.21681808,9.34634462 1.61582312,7.97796605 0,7.32626023 L10.8030423,7.32626023 L10.8030423,27.655816 C10.8030423,30.7866515 12.0359882,31.8729637 13.5320604,32.3979942 L0,32.3979942 Z M40.26096,7.0403243 C41.9959231,7.16374109 44.7106852,7.5488585 45.906769,7.89772477 L46.1861879,14.043107 C45.0200418,11.3387315 43.1231705,8.25331176 40.26096,7.0403243 Z M37.1537489,7.10040343 C36.2841289,7.57940721 35.531816,8.53211965 35.531816,10.3953873 C35.531816,13.1840773 37.8319303,14.500523 40.2668661,15.8941552 C40.6136958,16.0927218 40.9662279,16.2943433 41.3189637,16.5041111 C41.5024596,16.6126609 41.6875848,16.7208033 41.873321,16.8293531 C44.573216,18.4077031 47.3653681,20.0398189 47.3653681,24.0241853 C47.3653681,29.0663518 44.1756755,32.109207 38.3561461,32.6607131 C39.4776911,32.0189865 40.1664627,30.7141492 40.1664627,29.1248017 C40.1664627,26.4709334 38.1229576,25.3047873 34.7373459,23.3726832 C34.4886794,23.2307335 34.2320702,23.084507 33.9638525,22.9303378 C30.2953597,20.8923315 28.6595781,18.4233848 28.6595781,14.9247428 C28.6595781,11.7281257 30.9099998,7.88041383 37.1537489,7.10040343 Z M28.9748408,31.5194132 L28.5882978,24.2113471 C30.059931,28.0299359 33.0363937,31.3852026 35.3965871,32.6497155 C33.0184718,32.4124539 30.0678737,31.928766 28.9748408,31.5194132 Z M56.6387347,11.8313804 L56.5328325,11.8319914 C54.4834213,11.8680388 52.736646,12.4898069 51.3291651,13.6822249 C52.8792067,10.2560852 56.4949521,7 60.863825,7 C65.9518145,7 68.870031,9.36772871 68.870031,13.4964887 C68.870031,18.4506749 62.7169097,22.516301 56.7157174,24.7775165 C58.9551415,22.3258807 60.9367345,19.8807619 60.9367345,15.9855977 C60.9367345,13.3066794 59.410521,11.8313804 56.6387347,11.8313804 Z M49.6948091,32.3979942 L55.1231113,26.7495376 L65.0257813,26.7495376 C66.6953701,26.7495376 68.790197,25.8206531 70.0097015,23.2895907 L69.2624801,32.3979942 L49.6948091,32.3979942 Z M74.2740978,32.3979942 C75.8426723,31.7603407 76.4025283,30.4159938 76.4025283,27.655816 L76.4025283,12.6394956 C76.4025283,10.687433 76.133496,9.34573364 75.6011338,8.64963036 C75.1954469,8.12785839 74.6225568,7.8125957 73.9034402,7.5969218 C75.7548957,7.5614853 77.9943198,7.46861722 80.1754977,7.37819303 C81.5990676,7.31913219 83.0674423,7.25844209 84.4007917,7.21485926 C84.3360284,8.62356213 84.3360284,10.1055819 84.3360284,12.6394956 L84.3360284,27.655816 C84.3360284,30.6538664 85.0865084,31.8208272 86.4911381,32.3979942 L74.2740978,32.3979942 Z M96.6294404,11.8313804 L96.5233346,11.8319914 C94.4741271,11.8680388 92.7273518,12.4898069 91.3198709,13.6820213 C92.8697088,10.2560852 96.4854542,7 100.854123,7 C105.94252,7 108.860737,9.36772871 108.860737,13.4964887 C108.860737,18.4506749 102.707412,22.516301 96.7064232,24.7775165 C98.9458473,22.3258807 100.927237,19.8809656 100.927237,15.9855977 C100.927237,13.3066794 99.4008194,11.8313804 96.6294404,11.8313804 Z M89.6853113,32.3979942 L95.1136134,26.7495376 L105.016487,26.7495376 C106.686076,26.7495376 108.780495,25.8208568 110,23.289998 L109.252982,32.3979942 L89.6853113,32.3979942 Z"
              transform="translate(0 -7)"
            />
          </svg>
        </router-link>
        <p class="h6 gray">{{ about.home_heading_description }}</p>
        <div class="copyright gray h6">
          Â©{{ year }} PS212<span class="arr">, ALL RIGHTS RESERVED</span>
        </div>
      </div>

      <div class="column">
        <h4>Contact</h4>
        <p class="h6">
          <a href="mailto:contact@ps212.com" target="_blank"
            >contact@PS212.com</a
          ><br />
          <a href="tel:917-374-5050">917.374.5050</a><br />
          <a href="https://twitter.com/PS212Naming" target="_blank">
            <svg
              class="twitter"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="17"
              viewBox="0 0 20 17"
            >
              <path
                fill="#263238"
                d="M786.289607,246.250538 C793.837136,246.250538 797.964195,239.99737 797.964195,234.57595 C797.964195,234.398511 797.964195,234.221071 797.953105,234.045215 C798.756102,233.464154 799.449218,232.744751 800,231.920691 C799.25145,232.252705 798.457343,232.47059 797.64417,232.567078 C798.500391,232.053792 799.141073,231.247028 799.447085,230.2968 C798.641483,230.775015 797.76008,231.112038 796.840938,231.293314 C795.569182,229.941045 793.548376,229.610123 791.911726,230.486119 C790.275075,231.362115 789.429631,233.227159 789.849493,235.035393 C786.55018,234.870099 783.476185,233.311795 781.392586,230.74832 C780.302395,232.622687 780.85739,235.021653 782.660013,236.226774 C782.011512,236.204858 781.377631,236.028327 780.811153,235.711882 C780.811153,235.729309 780.811153,235.746736 780.811153,235.764163 C780.810921,237.715074 782.183849,239.396629 784.095374,239.78666 C783.490958,239.951302 782.856836,239.97515 782.241762,239.856369 C782.778642,241.528857 784.319494,242.674945 786.075729,242.70808 C784.621349,243.847049 782.826371,244.46416 780.979087,244.460298 C780.65189,244.46048 780.324964,244.441436 780,244.403263 C781.876219,245.608417 784.059677,246.248055 786.289607,246.245786"
                transform="translate(-780 -230)"
              />
            </svg>
          </a>
          <a href="https://www.linkedin.com/company/ps212/" target="_blank">
            <svg
              class="linkedin"
              width="22"
              height="22"
              viewBox="0 0 36 36"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M30.677 30.676h-5.339v-8.355c0-1.992-.034-4.555-2.774-4.555-2.779 0-3.203 2.171-3.203 4.413v8.497h-5.333v-17.18h5.118v2.349h.074c.712-1.351 2.454-2.775 5.051-2.775 5.407 0 6.406 3.557 6.406 8.184v9.422zM8.008 11.149c-1.715 0-3.098-1.387-3.098-3.097 0-1.709 1.383-3.096 3.098-3.096 1.708 0 3.094 1.387 3.094 3.096 0 1.71-1.386 3.097-3.094 3.097zM5.334 30.676h5.345v-17.18H5.334v17.18zM33.336 0H2.655C1.19 0 0 1.162 0 2.596v30.806C0 34.836 1.19 36 2.655 36h30.681c1.468 0 2.663-1.164 2.663-2.598V2.596C35.999 1.162 34.804 0 33.336 0z"
                fill="#263238"
                fill-rule="evenodd"
              />
            </svg>
          </a>
          <!-- <a href="https://www.instagram.com/_the_ridictionary_/?hl=en" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="instagram" width="24" height="24" viewBox="0 0 24 24"><path fill="#263238" fill-rule="nonzero" d="M12 2.162c3.204 0 3.584.012 4.849.07 1.17.054 1.805.249 2.228.413.56.218.96.478 1.38.898.42.42.68.82.898 1.38.164.423.36 1.058.413 2.228.058 1.265.07 1.645.07 4.849s-.012 3.584-.07 4.849c-.054 1.17-.249 1.805-.413 2.228-.218.56-.478.96-.898 1.38-.42.42-.82.68-1.38.898-.423.164-1.058.36-2.228.413-1.265.058-1.645.07-4.849.07s-3.584-.012-4.849-.07c-1.17-.053-1.805-.249-2.228-.413a3.718 3.718 0 01-1.38-.898c-.42-.42-.68-.82-.898-1.38-.164-.423-.36-1.058-.413-2.228-.058-1.265-.07-1.645-.07-4.849s.012-3.584.07-4.849c.053-1.17.249-1.805.413-2.228.218-.56.478-.96.898-1.38.42-.42.82-.68 1.38-.898.423-.164 1.058-.36 2.228-.413 1.265-.058 1.645-.07 4.849-.07zM12 0C8.74 0 8.332.014 7.052.072 5.775.131 4.902.333 4.14.63a5.882 5.882 0 00-2.125 1.384A5.882 5.882 0 00.63 4.14c-.297.763-.5 1.635-.558 2.912C.014 8.332 0 8.741 0 12c0 3.26.014 3.668.072 4.948.058 1.277.261 2.15.558 2.913.307.789.717 1.458 1.384 2.125A5.882 5.882 0 004.14 23.37c.764.297 1.636.5 2.913.558C8.332 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 1.277-.058 2.15-.261 2.912-.558a5.882 5.882 0 002.126-1.384 5.882 5.882 0 001.384-2.125c.297-.764.5-1.636.558-2.913.058-1.28.072-1.689.072-4.948 0-3.259-.014-3.668-.072-4.948-.059-1.277-.261-2.15-.558-2.912a5.882 5.882 0 00-1.384-2.126A5.882 5.882 0 0019.86.63c-.763-.297-1.635-.5-2.912-.558C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm7.846-10.406a1.44 1.44 0 11-2.88 0 1.44 1.44 0 012.88 0z"/></svg>
          </a> -->
        </p>
        <div class="privacy gray h6">
          <router-link to="/privacy">Privacy Policy</router-link>
        </div>
      </div>

      <div v-for="(office, index) in offices" :key="index" class="column">
        <h4>{{ office.name }}</h4>
        <p class="h6" v-html="$filters.nl2br(office.address)"></p>
      </div>
    </div>
  </footer>
</template>

<script>
import moment from "moment";
import { ref, onMounted } from "vue";
const api = require("../api");

export default {
  name: "v-footer",
  props: {
    msg: String,
  },
  setup() {
    const offices = ref([]);
    const about = ref([]);
    const year = ref("");
    const baseURL = ref("");

    onMounted(async () => {
      try {
        baseURL.value = api.getUri();
        year.value = moment().format("YYYY");
        const aboutItem = await api.get("/items/about/1", {
          params: {
            "fields[]": "*",
          },
        });
        about.value = aboutItem.data.data;
        // console.log({ aboutItem: aboutItem });
        // console.log({ about: about });
      } catch (err) {
        // eslint-disable-next-line
        console.log('Error fetching "About"', err);
      }
      try {
        const OfficeItems = await api.get("/items/offices", {
          params: {
            "fields[]": "*,image.*",
          },
        });
        offices.value = OfficeItems.data.data;
        // console.log({ OfficeItems: OfficeItems });
        // console.log({ offices: offices });
      } catch (err) {
        // eslint-disable-next-line
        console.log('Error fetching "Offices"', err);
      }
    });

    return {
      offices,
      about,
      year,
      baseURL,
    };
  },
};
</script>

<style lang="scss" scoped>
@import "~@/assets/_variables.scss";

footer {
  margin-top: 200px;
  margin-left: 80px;
  margin-left: var(--page-padding);
  margin-right: 80px;
  margin-right: var(--page-padding);

  .container {
    border-top: 2px solid $accent;
    background-color: $white;
    display: flex;
    flex-wrap: wrap;

    .column {
      width: calc((100% - 120px) / 4);
      padding-top: 100px;
      padding-bottom: 100px;
      border-bottom: 2px solid $light-gray;
      margin-bottom: 100px;
      margin-right: 40px;

      &:last-of-type {
        margin-right: 0;
      }
    }

    h4 {
      margin-bottom: 30px;
    }

    a:hover {
      color: $accent;
    }

    #logo {
      margin-bottom: 36px;

      &:hover path {
        fill: $dark-accent;
      }

      path {
        transition: fill $fast $transition;
      }
    }

    .linkedin,
    .twitter {
      // width: 20px;
      margin-right: 10px;
      margin-top: 20px;

      &:hover path {
        fill: $accent;
      }

      path {
        transition: fill $fast $transition;
      }
    }

    .copyright {
      position: absolute;
      left: 0;
      bottom: 38px;
    }

    .privacy {
      position: absolute;
      right: 0;
      bottom: 38px;
      text-align: right;
    }
  }
}

@media only screen and (max-width: 800px) {
  .arr {
    display: none;
  }

  footer {
    margin-top: 100px;

    .container {
      padding-bottom: 50px;

      .column {
        width: calc((100% - 20px) / 2);
        padding-top: 40px;
        padding-bottom: 40px;
        margin-bottom: 40px;
        margin-right: 20px;

        &:nth-of-type(2n) {
          margin-right: 0;
        }
      }
    }
  }
}
</style>
